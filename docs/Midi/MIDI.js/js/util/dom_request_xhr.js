"undefined"==typeof MIDI&&(MIDI={}),function(e){if((e.util||(e.util={})).request=function(r,s,o,n){"use strict";"string"==typeof r&&(r={url:r});var a=r.data,i=r.url,l=r.method||(r.data?"POST":"GET"),u=r.format,d=r.headers,p=r.responseType,f=r.withCredentials||!1;s=s||r.onsuccess,o=o||r.onerror,n=n||r.onprogress;if(void 0===t||!e.loc.isLocalUrl(i)){var c=new XMLHttpRequest;if(c.open(l,i,!0),d)for(var y in d)c.setRequestHeader(y,d[y]);else a&&c.setRequestHeader("Content-type","application/x-www-form-urlencoded");return"binary"===u&&c.overrideMimeType&&c.overrideMimeType("text/plain; charset=x-user-defined"),p&&(c.responseType=p),f&&(c.withCredentials="true"),o&&"onerror"in c&&(c.onerror=o),n&&c.upload&&"onprogress"in c.upload&&(a?c.upload.onprogress=function(e){n.call(c,e,event.loaded/event.total)}:c.addEventListener("progress",(function(e){var t=0;if(e.lengthComputable)t=e.total;else if(c.totalBytes)t=c.totalBytes;else{var r=parseInt(c.getResponseHeader("Content-Length-Raw"));if(!isFinite(r))return;c.totalBytes=t=r}n.call(c,e,e.loaded/t)}))),c.onreadystatechange=function(t){if(4===c.readyState)if(200===c.status||304===c.status||308===c.status||0===c.status&&e.client.cordova){if(s){var r;if("xml"===u)r=t.target.responseXML;else if("text"===u)r=t.target.responseText;else if("json"===u)try{r=JSON.parse(t.target.response)}catch(e){o&&o.call(c,t)}s.call(c,t,r)}}else o&&o.call(c,t)},c.send(a),c}t.readFile(i,"utf8",(function(e,t){e?o&&o(e):s&&s({responseText:t})}))},"undefined"!=typeof module&&module.exports){var t=require("fs");XMLHttpRequest=require("xmlhttprequest").XMLHttpRequest,module.exports=e.util.request}}(MIDI);